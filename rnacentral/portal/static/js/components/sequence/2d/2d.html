<div id="2d" style="min-height: 600px">

    <h2>Secondary structure</h2>

    <div ng-show="$ctrl.secondaryStructures.useForna && $ctrl.numStructures > 0">
      <p>
        Predicted using tRNAScan-SE 2.0 (source: <a href="{{ $ctrl.getSourceUrl() }}">GtRNAdb</a>).
      </p>

      <div id="rna_ss" style="width: {{ $ctrl.fornaSize }}px; height: {{ $ctrl.fornaSize }}px; margin-left: 9px;"></div>
    </div>

    <div ng-if="!$ctrl.secondaryStructures.useForna">
      <div ng-if="$ctrl.numStructures > 0">
        <p class="text-muted">
         Generated by
         <a href="https://github.com/RNAcentral/auto-traveler">auto-traveler</a>
         using the
         <a href='/search?q=secondary_structure_model:"{{ $ctrl.secondaryStructures.secondary_structures[0].model_id }}"'
            uib-tooltip="Browse other sequences matching this template">
           {{ $ctrl.secondaryStructures.secondary_structures[0].model_id }}
         </a>
         template provided by
         <a ng-if="$ctrl.secondaryStructures.secondary_structures[0].source === 'CRW'" href="http://www.rna.ccbb.utexas.edu/" target="_blank">CRW</a>
         <a ng-if="$ctrl.secondaryStructures.secondary_structures[0].source === 'Rfam'" href="https://rfam.org/" target="_blank">Rfam</a>
         <a ng-if="$ctrl.secondaryStructures.secondary_structures[0].source === 'RiboVision'" href="http://apollo.chemistry.gatech.edu/RiboVision/" target="_blank">RiboVision</a>
         <a ng-if="$ctrl.secondaryStructures.secondary_structures[0].source === 'GtRNAdb'" href="http://gtrnadb.ucsc.edu/" target="_blank">GtRNAdb</a>
         .
         <a href="{{ $ctrl.help }}">Learn more &rarr;</a>
        <p>
        <p ng-if="$ctrl.secondaryStructures.secondary_structures[0].model_id.indexOf('RF0') === -1" class="text-muted small">
         Template lineage: {{ $ctrl.secondaryStructures.secondary_structures[0].template_lineage }}
        </p>
      </div>

      <div class="btn-toolbar margin-bottom-10px" role="toolbar">
        <div class="btn-group" role="group">
          <a class="btn btn-default" id="2d-traveler-toggle-colors" ng-click="$ctrl.toggleColors()"><i class="fa fa-paint-brush" aria-hidden="true"></i> Toggle colours</a>
          <a class="btn btn-default" id="2d-traveler-download-png" ng-click="$ctrl.downloadPng()"><i class="fa fa-file-image-o" aria-hidden="true"></i> Save PNG</a>
          <a class="btn btn-default" id="2d-traveler-download-svg" ng-click="$ctrl.downloadSvg()"><i class="fa fa-file-code-o" aria-hidden="true"></i> Save SVG</a>
          <a class="btn btn-default" id="copy-dot-bracket-notation" ng-click="$ctrl.copy2D()"><i class="fa fa-copy" aria-hidden="true"></i> Copy dot-bracket notation</a>
        </div>
        <div class="btn-group" role="group">
          <a class="btn btn-default" id="copy-dot-bracket-notation" ng-click="$ctrl.feedback()"><i class="fa fa-comment-o" aria-hidden="true"></i> Is this diagram useful?</a>
        </div>
      </div>

      <div id="rna_ss_traveler" class="thumbnail col-md-12 col-sm-12 col-xs-12" style="overflow: auto;"></div>

      <div class="panel panel-default traveler-legend">
        <div class="panel-body">
          <strong>Colour legend</strong>
          <ul class="list-unstyled">
            <li><span class="traveler-black traveler-key"></span> Same as the template</li>
            <li>
              <span class="traveler-green traveler-key"></span> Not the same as the template
              <strong>Tip:</strong> Hover over green nucleotides for more details
            </li>
            <li><span class="traveler-red traveler-key"></span> Inserted nucleotides</li>
            <li><span class="traveler-blue traveler-key"></span> Re-inserted nucleotides</li>
            <li><strong>Tip:</strong> Hover over the nucleotides to see nucleotide numbers<li>
          </ul>
        </div>
      </div>

    </div>

    <div ng-if="$ctrl.numStructures === 0">
      <p>
        No secondary structures available
      </p>
    </div>

    <div class="col-md-12" ng-if="$ctrl.numStructures > 0" style="margin-bottom: 20px;">
      <h4>Dot-bracket notation</h4>
      <pre style="white-space: pre-wrap">{{ $ctrl.secondaryStructures.secondary_structures[0].secondary_structure }}</pre>
    </div>

</div>
