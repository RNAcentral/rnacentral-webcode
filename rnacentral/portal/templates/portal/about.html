<!--
Copyright [2009-2016] EMBL-European Bioinformatics Institute
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at
     http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

{% extends "portal/base.html" %}
{% load staticfiles %}

{% block title %}
About RNAcentral
{% endblock %}

{% block meta_tags %}
    {{ block.super }}
    <meta name="description" content="Learn about RNAcentral: key features, statistics and timeline"/>
    <meta name="twitter:description" content="Learn about RNAcentral: key features, statistics and timeline">
{% endblock %}

{% block content %}

<div class="row">
  <div class="col-md-12">
    <h1><i class="fa fa-info-circle"></i> About RNAcentral <a name="about-rnacentral" href="#about-rnacentral" class="text-muted smaller"><i class="fa fa-link"></i></a></h1>

    <p>
      RNAcentral is a public resource that offers integrated access to a <strong>comprehensive and up-to-date</strong> set of non-coding RNA sequences
      provided by a collaborating group of <a href="/expert-databases">Expert Databases</a>.
      The development of RNAcentral is coordinated by <a href="http://www.ebi.ac.uk" target="_blank">European Bioinformatics Institute</a>
      and is funded by <a href="http://www.bbsrc.ac.uk/pa/grants/AwardDetails.aspx?FundingReference=BB/J019321/1">BBSRC</a>.
    </p>
  </div>

</div>

<div class="row">

  <div class="col-md-12">
    <div class="col-md-6">

      <h3><i class="fa fa-exchange margin-right-5px"></i> Data integration</h3>

      <p>
        RNAcentral imports ncRNA sequences from <strong>multiple databases</strong> and enables integrated
        <a href="{% url 'metadata-search' %}?q=RNA">text search</a>,
        <a href="{% url 'nhmmer-sequence-search' %}">sequence similarity search</a>,
        and <a href="{% url 'api-docs' %}">programmatic data access</a>.
      </p>

    </div>

    <div class="col-md-6">
      <h3><i class="fa fa-barcode margin-right-5px"></i> Stable identifiers</h3>

      <p>
        RNAcentral assigns <a href="{% url 'help' %}"#rnacentral-identifiers>unique identifiers</a> to every distinct sequence
        and supports <strong>species-specific identifiers</strong> for referring to sequences in specific organisms.
        <a href="http://blog.rnacentral.org/2015/02/rnacentral-release-2.html">More &rarr;</a>
      </p>
    </div>

  </div>

</div>

<div class="row">

  <div class="col-md-12">
    <div class="col-md-6">

      <h3><i class="fa fa-map-signs margin-right-5px"></i> Genomic mapping</h3>

      <p>
        Where possible, we map sequences to <strong>reference genomes</strong> from <a href="{% url 'help-genomic-mapping' %}">select species</a>.

        You can use a <a href="{% url 'genome-browser' %}">genome browser</a> to browse all mapped sequences
        or view individual sequences in their genomic context.
      </p>

      <p>
        For example,
        <button type="button" class="btn btn-primary btn-sm genoverse-xref help margin-right-5px" data-genomic-start="73792205" data-genomic-end="73829231" data-strand="1" data-chromosome="X" data-species="homo_sapiens" data-description="Homo sapiens TSIX transcript, XIST antisense RNA (TSIX), antisense RNA." data-species-label="Homo sapiens" title="" data-original-title="View on this page using Genoverse browser"><i class="fa fa-map-marker"></i> view genomic location</button>
        of human <a href="{% url 'unique-rna-sequence' 'URS000025784F'%}">TSIX lncRNA</a>.
      </p>

    </div>

    <div class="col-md-6">

      <h3><i class="fa fa-file-text margin-right-5px"></i> Additional annotations</h3>

      <p>
        Currently we import <strong>modified nucleotides</strong> from Modomics and PDB
        (for example, <a href="{% url 'unique-rna-sequence' 'URS00001BBAFC' %}">this <em>E.coli</em> tRNA</a>
        is annotated by both databases).
      </p>

      <p>
        We aim to include intermolecular interactions and high-quality secondary structures soon.
      </p>
    </div>

  </div>

</div>

<div class="row">
  <div class="col-md-12">
    <div>
      <div class="wrap genoverse-wrap">
        <div id="genoverse"></div>
      </div>
    </div>
  </div>
</div>

<div class="row">

  <div class="col-md-12">
    <h2><i class="fa fa-line-chart"></i> Database growth <a name="growth-chart" href="#growth-chart" class="text-muted smaller"><i class="fa fa-link"></i></a></h2>

    <ul class="nav nav-tabs" role="tablist">
      <li role="presentation" class="active"><a href="" data-target="#sequences" aria-controls="sequences" role="tab" data-toggle="tab">Number of sequences over time</a></li>
      <li role="presentation"><a href="" data-target="#databases" aria-controls="databases" role="tab" data-toggle="tab">Number of databases over time</a></li>
    </ul>

    <div class="tab-content col-md-7">
      <div role="tabpanel" class="tab-pane active" id="sequences">
        <div class="panel panel-default overflow-auto">
          <div class="panel-body">
            <div id="sequence-graph" class="nhmmer-dashboard-graph"></div>
          </div>
        </div>
      </div>

      <div role="tabpanel" class="tab-pane" id="databases">
        <div class="panel panel-default overflow-auto">
          <div class="panel-body">
            <div id="database-graph" class="nhmmer-dashboard-graph"></div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-4">
      <p class="well">
        <i class="fa fa-lightbulb-o fa-3x pull-left"></i>
        Hover over the chart to see the number of sequences in each release
      </p>
    </div>

  </div>
</div>

<div class="row">
  <div class="col-md-12">

    <h2><i class="fa fa-history"></i> Timeline <a name="timeline" href="#timeline" class="text-muted smaller"><i class="fa fa-link"></i></a></h2>

    <div class="panel panel-default">
      <div class="panel-body">
          <div id='timeline-embed' style="width: 100%; height: 650px"></div>
      </div>
    </div>

  </div>
</div>

<div class="row">
  <div class="col-md-12">
    <h2>Want to learn more? <a name="training" href="#training" class="text-muted smaller"><i class="fa fa-link"></i></a></h2>

    Explore all RNAcentral <a href="{% url 'training' %}">training materials</a>, including an online training course and a video walkthrough of the website.

  </div>
</div>

<br>

{% endblock content %}

{% block extra_js_uncompressed %}
    <script type="text/javascript">
      // initialize the timeline plugin to take data from spreadsheet and display timeline in div#timeline-embed
      timeline = new TL.Timeline(
          'timeline-embed',
          'https://docs.google.com/spreadsheets/d/1UCrvzAbSVi90s9EwjVk_Q8vqhc_IQ9ImAyI0sA-kmG8'
      );
    </script>

<script src="{% static "js/d3/d3.sequencesOverTime.js" %}"></script>
<script>
  var data = [
    {
      'date': '11-06-14',
      'sequence_count': 7704884,
      'expert_databases': 8,
      'label': 'release 1.0beta',
    },
    {
      'date': '05-09-14',
      'sequence_count': 8108241,
      'expert_databases': 10,
      'label': 'release 1.0',
    },
    {
      'date': '18-02-15',
      'sequence_count': 8446855,
      'expert_databases': 12,
      'label': 'release 2',
    },
    {
      'date': '20-05-15',
      'sequence_count': 8607919,
      'expert_databases': 15,
      'label': 'release 3',
    },
    {
      'date': '18-11-15',
      'sequence_count': 9321083,
      'expert_databases': 22,
      'label': 'release 4',
    },
    {
      'date': '23-03-16',
      'sequence_count': 10248515,
      'expert_databases': 22,
      'label': 'release 5',
    },
  ];

  /**
   * Initialise d3 graphs.
   */
  (function(){
    var d1 = JSON.parse(JSON.stringify(data));
    $.each(d1, function(key, value){
      d1[key].count = d1[key].sequence_count;
    });
    d3Graph(d1, '#sequence-graph');

    var d2 = JSON.parse(JSON.stringify(data));
    $.each(d2, function(key, value){
      d2[key].count = d2[key].expert_databases;
    });
    d3Graph(d2, '#database-graph');
  })();
</script>
{% endblock extra_js_uncompressed %}
