<!--
Copyright [2009-2015] EMBL-European Bioinformatics Institute
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at
     http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

{% load staticfiles %}
{% load portal_extras %}

<div class="navbar navbar-default navbar-static-top">

  <div class="container rnacentral-masthead">

    <!-- global-search -->
    <div class="row">
      <div class="col-md-4">
        <a href="/"><img src="{% static "img/logo/RNAcentral_logo_ltgrey.png" %}" alt="RNAcentral logo" class="rnacentral-header-logo"></a>
      </div>

      <div class="col-md-8" ng-controller="QueryCtrl">

        <form novalidate name="queryForm" class="global-search" ng-submit="submit_query()">
          <fieldset>
          <div class="form-group" ng-class="(query.submitted && queryForm.$invalid) ? 'has-error' : ''">
            <div class="input-group input-group-lg">
              <input type="text"
                     class="form-control"
                     id="query-text"
                     name="text"
                     tabindex="1"
                     ng-model="query.text"
                     ng-minlength="2"
                     ng-maxlength="1000"
                     autocomplete="off"
                     placeholder="Search RNAcentral"
                     autofocus
                     required>
              <div class="input-group-btn">
                <button type="submit" class="btn btn-primary">
                  <i class="fa fa-search"></i> Search
                </button>
              </div><!-- /input-group-btn -->
            </div><!--input-group -->
            <span class="help-block example-searches">

                <i>
                  Examples:
                  <a class="help" data-placement="bottom" title="Search by gene name" href="" rel="nofollow" ng-click="meta_search('HOTAIR')">HOTAIR</a>,
                  <a class="help" data-placement="bottom" title="Search by species name or NCBI taxonomy ID" href="" rel="nofollow" ng-click="meta_search('TAXONOMY:&quot;9606&quot;')">Homo sapiens</a>,
                  <a class="help" data-placement="bottom" title="Search by RNA type" href="" rel="nofollow" ng-click="meta_search('rna_type:&quot;tRNA&quot;')">tRNA</a>,
                  <a class="help" data-placement="bottom" title="Search by Expert Database" href="" rel="nofollow" ng-click="meta_search('expert_db:&quot;mirbase&quot;')">miRBase</a>,
                  <a class="help" data-placement="bottom" title="Search by external identifiers" href="" rel="nofollow" ng-click="meta_search('4V4Q')">4V4Q</a>
                </i>

            </span>
            <label class="control-label ng-cloak has-error"
                   for="query-text" ng-show="query.submitted && (queryForm.text.$error.required || queryForm.text.$error.minlength)"
                   ng-cloak>
              Your query is too short
            </label>
            <label class="control-label ng-cloak"
                   for="query-text" ng-show="query.submitted && (queryForm.text.$error.maxlength)"
                   ng-cloak>
              Your query is too long
            </label>
          </div><!-- /form-group -->
          </fieldset>
        </form><!-- /form -->

      </div><!-- /ng-controller -->
    </div><!-- /row -->
    <!-- /global-search -->

  </div>

  <div class="container rnacentral-masthead-menu">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <p class="navbar-text">
        <span class="badge release-number">
          <a href="http://blog.rnacentral.org/2015/11/rnacentral-release-4.html">v4</a>
        </span>
      </p>
    </div>
    <div class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-left">
        {% get_expert_databases_list as expert_dbs %}
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Databases <b class="caret"></b></a>
          <ul class="dropdown-menu multi-column columns-2">
            <div class="row">
              {% for expert_db in expert_dbs %}
                {% if forloop.first %}
                  <div class="col-sm-5">
                    <ul class="multi-column-dropdown">
                {% elif forloop.counter0 == 11 %}
                  <div class="col-sm-7">
                    <ul class="multi-column-dropdown">
                {% endif %}
                <li>
                  <a href="{% url 'portal.views.expert_database_view' expert_db_name=expert_db.label %}">{{ expert_db.name }}</a>
                </li>
                {% if forloop.counter0 == 10 or forloop.last %}
                    </ul>
                  </div>
                {% endif %}
              {% endfor %}
            </div>

            <div class="row">
              <div class="col-sm-12">
              <ul class="multi-column-dropdown">
                <li class="divider"></li>
                <li><a href="{% url 'expert-databases' %}">All databases</a></li>
              </ul>
              </div>
            </div>
          </ul>
        </li>

        <li class="dropdown">
          <a class="dropdown-toggle" data-toggle="dropdown" href="">Tools<b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li><a href="{% url 'nhmmer-sequence-search' %}">Sequence search</a></li>
            <li><a href="{% url 'genome-browser' %}">Genome browser</a></li>
          </ul>
        </li>

        <li><a href="/search?q=RNA">Browse</a></li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li><a href="{% url 'downloads' %}">Downloads</a></li>

        <li class="dropdown">
          <a class="dropdown-toggle" data-toggle="dropdown" href="">API<b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li><a href="{% url 'api-v1-root' %}">Browsable API</a></li>
            <li><a href="{% url 'api-docs' %}">API Documentation</a></li>
          </ul>
        </li>

        <li class="dropdown">
          <a href="{% url 'help' %}">Help</a>
        </li>
        <li><a href="" class="doorbell-feedback help" title="Send quick feedback without leaving the page">Feedback <i class="fa fa-comment"></i></a></li>
      </ul>
    </div><!--/.nav-collapse -->
  </div>

</div>
