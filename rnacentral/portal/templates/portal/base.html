<!--
Copyright [2009-2016] EMBL-European Bioinformatics Institute
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at
     http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

{% load staticfiles %}
{% load compress %}
{% load portal_extras %}
<!DOCTYPE html>
<html xmlns:ng="http://angularjs.org" id="ng-app" ng-app="rnacentralApp">
    <head>
        {% block meta_tags %}
          <meta charset="utf-8">
          <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
          <meta name="viewport" content="width=device-width">
          <meta name="twitter:card" content="summary">
          <meta name="twitter:site" content="@RNAcentral">
          <meta name="twitter:creator" content="@RNAcentral">
          <meta name="twitter:title" content="RNAcentral">
          <meta name="twitter:image" content="http://rnacentral.org{% static "img/logo/RNAcentral_icon.png" %}">
        {% endblock meta_tags %}
        <base href="/"/>

        <title>
            {% block title %} RNAcentral {% endblock %}
        </title>

        {% compress css %}
          {% block stylesheets %}
            <link rel="stylesheet" href="{% static "js/vendor/bootstrap/css/bootstrap.min.css" %}">
            <link rel="stylesheet" href="{% static "fonts/font-awesome/css/font-awesome.min.css" %}">
            <link rel="stylesheet" href="{% static "css/ebi-global.css" %}">
            <link rel="stylesheet" href="{% static "css/ebi-visual.css" %}">
            <link rel="stylesheet" href="{% static "js/vendor/slick/slick.css" %}"/>
            <link rel="stylesheet" href="{% static "js/vendor/slick/slick-theme.css" %}"/>
            <link rel="stylesheet" href="{% static "css/main.css" %}">
            <link rel="stylesheet" href="{% static "css/animate/animate.min.css" %}">
            <link rel="stylesheet" href="{% static "js/vendor/hopscotch/css/hopscotch.css" %}">
            <link rel="stylesheet" href="{% static "js/vendor/Genoverse/css/genoverse.css" %}">
            <link rel="stylesheet" href="{% static "js/vendor/Genoverse/css/controlPanel.css" %}">
            <link rel="stylesheet" href="{% static "js/vendor/Genoverse/css/fileDrop.css" %}">
            <link rel="stylesheet" href="{% static "js/vendor/Genoverse/css/karyotype.css" %}">
            <link rel="stylesheet" href="{% static "js/vendor/Genoverse/css/resizer.css" %}">
            <link rel="stylesheet" href="{% static "js/vendor/Genoverse/css/trackControls.css" %}">
            <link rel="stylesheet" href="{% static "js/vendor/Genoverse/css/tooltips.css" %}">
            <link rel="stylesheet" href="{% static "js/vendor/angular/loading-bar/loading-bar.css" %}">
            <link rel="stylesheet" href="{% static "css/timeline/timeline.css" %}">
            <link rel="stylesheet" href="{% static "css/timeline/fonts/font.bevan-potanosans.css?v1" %}">
          {% endblock stylesheets %}
        {% endcompress %}

        {% compress js %}
          {% block javascript %}
          {% endblock javascript %}
          <!-- polyfill JSON.stringify for Angular.js -->
          <!--[if lte IE 7]>
            <script src="{% static "js/vendor/angular/json3/json3.min.js" %}"></script>
          <![endif]-->
          <!-- create Angular.js custom element tags -->
          <!--[if lte IE 8]>
            <script>
              document.createElement('ng-include');
              document.createElement('ng-pluralize');
              document.createElement('ng-view');

              // Optionally these for CSS
              document.createElement('ng:include');
              document.createElement('ng:pluralize');
              document.createElement('ng:view');
            </script>
          <![endif]-->
        {% endcompress %}

        <!-- Favicons -->
        <link rel="shortcut icon"                    href="{% static "img/icons/favicon.ico"                  %}" type="image/x-icon" />
        <link rel="apple-touch-icon"                 href="{% static "img/icons/apple-touch-icon.png"         %}" />
        <link rel="apple-touch-icon" sizes="57x57"   href="{% static "img/icons/apple-touch-icon-57x57.png"   %}" />
        <link rel="apple-touch-icon" sizes="60x60"   href="{% static "img/icons/apple-touch-icon-60x60.png"   %}" />
        <link rel="apple-touch-icon" sizes="72x72"   href="{% static "img/icons/apple-touch-icon-72x72.png"   %}" />
        <link rel="apple-touch-icon" sizes="76x76"   href="{% static "img/icons/apple-touch-icon-76x76.png"   %}" />
        <link rel="apple-touch-icon" sizes="114x114" href="{% static "img/icons/apple-touch-icon-114x114.png" %}" />
        <link rel="apple-touch-icon" sizes="120x120" href="{% static "img/icons/apple-touch-icon-120x120.png" %}" />
        <link rel="apple-touch-icon" sizes="144x144" href="{% static "img/icons/apple-touch-icon-144x144.png" %}" />
        <link rel="apple-touch-icon" sizes="152x152" href="{% static "img/icons/apple-touch-icon-152x152.png" %}" />

        {% block extra_head %}{% endblock %}
    </head>

    <body class="level2">
        <header>
        {% include "portal/header.html" %}
        </header>

        <div class="container">

          <div class="container-main">
            <!--[if lt IE 10]>
              <div class="alert alert-danger">
                You are using an <strong>outdated browser</strong> and as a result this website may not function as intended. Please <a href="http://whatbrowser.org/">upgrade your browser</a> to improve your experience.</p>
              </div>
            <![endif]-->

            <noscript>
              <div class="alert alert-danger">
                Javasript is currently disabled or is not supported by this browser. Please enable JavaScript for full functionality.
              </div>
            </noscript>

            <div ng-show="!display_search_interface" ng-controller="MainContent">
              {% block content %}{% endblock %}
            </div>
            {% include "portal/search/metadata-search-results.html" %}
          </div>

          <footer>
            <div id="local-footer">
              {% block optional-footer %}{% endblock  %}
            </div>
            {% include "portal/footer.html" %}
          </footer>

        </div> <!-- container -->


        {% compress js %}
          {% block extra_js %}
            <script src="{% static "js/vendor/modernizr-2.6.2-respond-1.1.0.min.js" %}"></script>
            <script src="{% static "js/vendor/jquery-1.10.1.min.js" %}"></script>
            <script src="{% static "js/vendor/slick//slick.min.js" %}"></script>
            <script src="{% static "js/vendor/bootstrap/js/bootstrap.min.js" %}"></script>
            <script src="{% static "js/vendor/hopscotch/js/hopscotch.js" %}"></script>
            <script src="{% static "js/vendor/angular/angular.min.js" %}"></script>
            <script src="{% static "js/vendor/angular/loading-bar/loading-bar.js" %}"></script>
            <script src="{% static "js/vendor/underscore/underscore-min.js" %}"></script>
            <script src="{% static "js/vendor/moment.min.js" %}"></script>
            <script src="{% static "js/search/metadata.search.js" %}"></script>
            <script src="{% static "js/vendor/md5.min.js" %}"></script>
            <script src="{% static "js/search/nhmmer.sequence.search.js" %}"></script>
            <script src="{% static "js/search/export-results.search.js" %}"></script>
            <script src="{% static "js/vendor/d3/d3.min.js" %}"></script>
            <script src="{% static "js/vendor/query-string.js" %}"></script>
            <script src="{% static "js/d3/d3.ExpertDatabaseSequenceDistribution.js" %}"></script>
            <script src="{% static "js/d3/d3.speciesSunburst.js" %}"></script>
            <script src="{% static "js/d3/d3.speciesTree.js" %}"></script>
            <script src="{% static "js/jquery.EuropePMCAbstracts.js" %}"></script>
            <script src="{% static "js/vendor/DataTables-1.9.4/media/js/jquery.dataTables.min.js" %}"></script>
            <script src="{% static "js/vendor/DataTables-plugins/integration/bootstrap/3/dataTables.bootstrap.js" %}"></script>
            <script src="{% static "js/vendor/handlebars-v1.1.2.js" %}"></script>
            <script src="{% static "js/guidedTour.js" %}"></script>
            <script src="{% static "js/rnaView.js" %}"></script>
            <script src="{% static "js/vendor/Genoverse/js/genomes/grch38.js" %}"></script>
            <script src="{% static "js/vendor/Genoverse/js/genoverse.combined.js" %}"></script>
            <script src="{% static "js/genoverse.RNAcentralTrack.js" %}"></script>
            <script src="{% static "js/vendor/timeline-min.js" %}"></script>

            <script>
                $(function() {
                  // record javascript errors for selenium
                  window.onerror=function(msg){
                      $("body").attr("JSError",msg);
                  };
                  // initialise bootstrap tooltips
                  $('.help').tooltip();
                });
                if(!window.console){ window.console = {log: function(){} }; }
                console.log('Welcome to the RNAcentral javascipt console!');
            </script>
          {% endblock extra_js %}

          <!--[if lte IE 8]>
          <script type="text/javascript">
              // bootstrap angular.js manually on IE < 8
              $(document).ready(function() {
                  angular.bootstrap(document);
              });
          </script>
          <![endif]-->
        {% endcompress %}

        {% block extra_js_uncompressed %}
        {% endblock %}

        <!--Google Analytics-->
        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
          ga('create', 'UA-51212613-1', 'rnacentral.org');
          ga('send', 'pageview');
        </script>
        <!--Google Analytics-->

        <!--Doorbell.io feedback-->
        <script type="text/javascript">
            window.doorbellOptions = {
                appKey: 'iPUykwSlDQ7fuIHlRux5tNce109WQyyUYCAyksCG41X57V793oTm0w4VCx7nSlbC',
                hideButton: true,
                strings: {
                  'email-input-placeholder': 'Your email (optional)',
                  'intro-text': 'The <strong>current URL</strong> and your <strong>browser</strong> version are sent automatically',
                }
            };
            (function(d, t) {
                var g = d.createElement(t);g.id = 'doorbellScript';g.type = 'text/javascript';g.async = true;g.src = 'https://embed.doorbell.io/button/2991?t='+(new Date().getTime());(d.getElementsByTagName('head')[0]||d.getElementsByTagName('body')[0]).appendChild(g);
            }(document, 'script'));
            $(function(){
              $('.doorbell-feedback').on('click', function(){
                doorbell.show();
              });
            });
        </script>
        <!--Doorbell.io feedback-->

        <script>
          var global_settings = {
            EBI_SEARCH_ENDPOINT: '{% get_ebi_search_endpoint %}',
          };
        </script>
    </body>
</html>
